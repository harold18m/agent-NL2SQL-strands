# =============================================================================
# Dockerfile for AWS Lambda (Python 3.11)
# =============================================================================

FROM public.ecr.aws/lambda/python:3.11

WORKDIR /var/task

# Install dependencies directly (faster and simpler)
RUN pip install --upgrade pip && pip install --no-cache-dir \
    mangum \
    "fastapi[standard]" \
    "strands-agents[gemini]" \
    psycopg2-binary \
    python-dotenv \
    strands-agents-tools \
    requests

# Copy application code
COPY app/ app/
COPY lambda_handler.py .

CMD ["lambda_handler.handler"]